# ==============================================================================
# ä¼ä¸šçº§ç½‘ç»œçˆ¬è™«å¼€å‘çŽ¯å¢ƒæ¨¡æ¿
# é€‚ç”¨äºŽï¼šWebæ•°æ®é‡‡é›†ã€APIé›†æˆã€æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€åˆ†å¸ƒå¼çˆ¬è™«ã€åæ£€æµ‹
# Python ç‰ˆæœ¬ï¼šå‚æ•°åŒ–æ”¯æŒ 3.9-3.12  
# ==============================================================================

# ðŸ’» ç³»ç»Ÿé…ç½®è¦æ±‚
# æœ€ä½Žé…ç½®ï¼š16GB RAM, 15GB å¯ç”¨ç£ç›˜ç©ºé—´, ç¨³å®šç½‘ç»œè¿žæŽ¥
# æŽ¨èé…ç½®ï¼š32GB RAM, 30GB å¯ç”¨ç£ç›˜ç©ºé—´, é«˜å¸¦å®½ç½‘ç»œ
# é«˜æ€§èƒ½é…ç½®ï¼š64GB+ RAM, 50GB+ å¯ç”¨ç£ç›˜ç©ºé—´, å¤šIPä»£ç†æ± 
# åŒ…å¤§å°ä¼°ç®—ï¼š~5.2GB (å®Œæ•´çš„ä¼ä¸šçº§çˆ¬è™«å·¥å…·é“¾)
# æ”¯æŒç³»ç»Ÿï¼šWindows 11+, macOS 12+, Linux (Ubuntu 20.04+)
# å®‰è£…æ—¶é—´ï¼š25-45åˆ†é’Ÿ (åŒ…å«æµè§ˆå™¨ä¸‹è½½)
# ç½‘ç»œè¦æ±‚ï¼šé«˜é€Ÿç¨³å®šè¿žæŽ¥ï¼Œä»£ç†æœåŠ¡æ”¯æŒ
# ç‰¹æ®Šè¯´æ˜Žï¼šéœ€è¦é…ç½®ç”¨æˆ·ä»£ç†è½®æ¢å’Œä»£ç†æ± ï¼Œéµå¾ªrobots.txt

name: enterprise-webscraping{{ '-' + suffix if suffix else '' }}

channels:
  - conda-forge
  - defaults

dependencies:
  # -----------------------------------------------------------------------------
  # æ ¸å¿ƒ Python çŽ¯å¢ƒ
  # -----------------------------------------------------------------------------
  - python={{ python_version }}.*           # Python è§£é‡Šå™¨ (3.11ä¸ºå¼‚æ­¥æ€§èƒ½æœ€ä¼˜)
  - pip                                      # Python åŒ…ç®¡ç†å™¨
  - setuptools>=69.0,<70.0                  # Python åŒ…æž„å»ºå·¥å…·
  - wheel>=0.43,<1.0                        # äºŒè¿›åˆ¶åŒ…åˆ†å‘

  # -----------------------------------------------------------------------------
  # HTTP å’Œå¼‚æ­¥ç½‘ç»œæ¡†æž¶
  # -----------------------------------------------------------------------------
  - requests>=2.32,<3.0                     # åŒæ­¥ HTTP å®¢æˆ·ç«¯
  - aiohttp>=3.9,<4.0                       # å¼‚æ­¥ HTTP å®¢æˆ·ç«¯
  - httpx>=0.27,<1.0                        # çŽ°ä»£åŒæ­¥/å¼‚æ­¥ HTTP å®¢æˆ·ç«¯

  # -----------------------------------------------------------------------------
  # HTML/XML è§£æžå¼•æ“Ž (é«˜æ€§èƒ½)
  # -----------------------------------------------------------------------------
  - lxml>=5.1,<6.0                          # å¿«é€ŸCè¯­è¨€XML/HTMLè§£æžå™¨
  - beautifulsoup4>=4.12,<5.0               # çµæ´»çš„HTMLè§£æžå™¨
  - cssselect>=1.2,<2.0                     # CSSé€‰æ‹©å™¨æ”¯æŒ
  - html5lib>=1.1,<2.0                      # æ ‡å‡†å…¼å®¹HTMLè§£æžå™¨

  # -----------------------------------------------------------------------------
  # æ•°æ®å¤„ç†å’Œå­˜å‚¨
  # -----------------------------------------------------------------------------
  - pandas>=2.1,<3.0                        # æ•°æ®åˆ†æžå’Œå¤„ç†
  - numpy>=1.26,<2.0                        # æ•°å€¼è®¡ç®—åŸºç¡€
  - sqlalchemy>=2.0,<3.0                    # æ•°æ®åº“ ORM
  - redis-py>=5.0,<6.0                      # Redis ç¼“å­˜å®¢æˆ·ç«¯

  # -----------------------------------------------------------------------------
  # æ•°æ®åºåˆ—åŒ–å’Œæ ¼å¼æ”¯æŒ
  # -----------------------------------------------------------------------------
  - openpyxl>=3.1,<4.0                      # Excel æ–‡ä»¶è¯»å†™
  - xlsxwriter>=3.1,<4.0                    # Excel å†™å…¥ä¼˜åŒ–
  - h5py>=3.10,<4.0                         # HDF5 å¤§æ•°æ®é›†å­˜å‚¨

  # -----------------------------------------------------------------------------
  # å¼€å‘å’Œæµ‹è¯•å·¥å…·
  # -----------------------------------------------------------------------------
  - pytest>=7.4,<8.0                        # æµ‹è¯•æ¡†æž¶
  - pytest-asyncio>=0.23,<1.0               # å¼‚æ­¥æµ‹è¯•æ”¯æŒ
  - black>=23.0,<25.0                       # ä»£ç æ ¼å¼åŒ–
  - ruff>=0.1.0,<1.0                        # å¿«é€ŸPythonä»£ç æ£€æŸ¥å™¨

  # -----------------------------------------------------------------------------
  # ç³»ç»Ÿå’Œç½‘ç»œå·¥å…·
  # -----------------------------------------------------------------------------
  - python-dotenv>=1.0,<2.0                 # çŽ¯å¢ƒå˜é‡ç®¡ç†
  - click>=8.1,<9.0                         # CLI å·¥å…·å¼€å‘æ¡†æž¶
  - tqdm>=4.66,<5.0                         # è¿›åº¦æ¡æ˜¾ç¤º
  - psutil>=5.9,<6.0                        # ç³»ç»Ÿèµ„æºç›‘æŽ§

  # -----------------------------------------------------------------------------
  # pip ä¾èµ– (çˆ¬è™«ä¸“ç”¨å·¥å…·ç”Ÿæ€)
  # -----------------------------------------------------------------------------
  - pip:
    # =========================================================================
    # ðŸŒ çŽ°ä»£æµè§ˆå™¨è‡ªåŠ¨åŒ– (Playwright ä¼˜å…ˆ)
    # =========================================================================
    - playwright>=1.40.0,<2.0               # çŽ°ä»£é«˜æ€§èƒ½æµè§ˆå™¨è‡ªåŠ¨åŒ–
    - selenium>=4.16.0,<5.0                 # ä¼ ç»Ÿæµè§ˆå™¨è‡ªåŠ¨åŒ–å…¼å®¹
    - selenium-stealth>=1.0.6,<2.0          # Selenium åæ£€æµ‹å¢žå¼º
    - webdriver-manager>=4.0.0,<5.0         # æµè§ˆå™¨é©±åŠ¨è‡ªåŠ¨ç®¡ç†

    # =========================================================================
    # ðŸ•·ï¸ é«˜çº§çˆ¬è™«æ¡†æž¶å’Œå¼•æ“Ž
    # =========================================================================
    - scrapy>=2.11.0,<3.0                   # ç”Ÿäº§çº§åˆ†å¸ƒå¼çˆ¬è™«æ¡†æž¶
    - scrapy-playwright>=0.0.33,<1.0        # Scrapy + Playwright é›†æˆ
    - scrapy-redis>=0.7.3,<1.0              # Scrapy åˆ†å¸ƒå¼æ”¯æŒ
    - scrapy-splash>=0.8.0,<1.0             # JavaScript æ¸²æŸ“æ”¯æŒ
    - scrapyd>=1.3.0,<2.0                   # Scrapy å®ˆæŠ¤è¿›ç¨‹å’Œéƒ¨ç½²

    # =========================================================================
    # ðŸ¥· åæ£€æµ‹å’Œéšç§ä¿æŠ¤
    # =========================================================================
    - undetected-chromedriver>=3.5.0,<4.0   # Chrome åæ£€æµ‹ç»•è¿‡
    - fake-useragent>=1.4.0,<2.0            # ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²è½®æ¢
    - python-anticaptcha>=0.7.1,<1.0        # éªŒè¯ç è¯†åˆ«æœåŠ¡
    - curl-cffi>=0.6.0,<1.0                 # TLS æŒ‡çº¹åŒ¹é…å’Œä¼ªè£…
    - cloudscraper>=1.2.71,<2.0             # Cloudflare åæœºå™¨äººç»•è¿‡

    # =========================================================================
    # ðŸ”„ ä»£ç†å’Œç½‘ç»œç®¡ç†
    # =========================================================================
    - requests-oauthlib>=1.3.1,<2.0         # OAuth è®¤è¯æ”¯æŒ
    - httpx-socks>=0.8.0,<1.0               # SOCKS ä»£ç†æ”¯æŒ
    - aiohttp-socks>=0.8.0,<1.0             # å¼‚æ­¥ SOCKS ä»£ç†
    - rotating-proxies>=0.6.3,<1.0          # ä»£ç†è½®æ¢ä¸­é—´ä»¶
    - pysocks>=1.7.1,<2.0                   # SOCKS ä»£ç†åŸºç¡€åº“

    # =========================================================================
    # âš¡ åˆ†å¸ƒå¼å¤„ç†å’Œä»»åŠ¡é˜Ÿåˆ—
    # =========================================================================
    - celery>=5.3.0,<6.0                    # åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—
    - kombu>=5.3.0,<6.0                     # æ¶ˆæ¯é˜Ÿåˆ—æŠ½è±¡å±‚
    - flower>=2.0.1,<3.0                    # Celery ç›‘æŽ§å’Œç®¡ç†
    - dramatiq>=1.15.0,<2.0                 # è½»é‡çº§ä»»åŠ¡é˜Ÿåˆ—æ›¿ä»£æ–¹æ¡ˆ
    - rq>=1.15.0,<2.0                       # Redis é˜Ÿåˆ—

    # =========================================================================
    # ðŸ“„ æ•°æ®æå–å’Œå†…å®¹å¤„ç†
    # =========================================================================
    - jsonlines>=4.0.0,<5.0                 # JSONL æ ¼å¼å¤„ç†
    - feedparser>=6.0.10,<7.0               # RSS/Atom æ•°æ®æºè§£æž
    - newspaper3k>=0.2.8,<1.0               # æ–°é—»æ–‡ç« æ™ºèƒ½æå–
    - readability-lxml>=0.8.1,<1.0          # ç½‘é¡µä¸»è¦å†…å®¹æå–
    - trafilatura>=1.6.0,<2.0               # é«˜è´¨é‡æ–‡æœ¬æå–
    - boilerpy3>=1.0.7,<2.0                 # æ ·æ¿æ–‡æœ¬ç§»é™¤

    # =========================================================================
    # ðŸ—„ï¸ æ•°æ®å­˜å‚¨å’Œæ•°æ®åº“é›†æˆ
    # =========================================================================
    - pymongo>=4.6.0,<5.0                   # MongoDB æ–‡æ¡£æ•°æ®åº“
    - psycopg2-binary>=2.9.9,<3.0           # PostgreSQL å…³ç³»æ•°æ®åº“
    - aiomysql>=0.2.0,<1.0                  # å¼‚æ­¥ MySQL å®¢æˆ·ç«¯
    - aioredis>=2.0.1,<3.0                  # å¼‚æ­¥ Redis å®¢æˆ·ç«¯
    - elasticsearch>=8.11.0,<9.0            # Elasticsearch æœç´¢å¼•æ“Ž
    - motor>=3.3.0,<4.0                     # å¼‚æ­¥ MongoDB å®¢æˆ·ç«¯

    # =========================================================================
    # ðŸ–¼ï¸ å›¾åƒå’Œåª’ä½“æ–‡ä»¶å¤„ç†
    # =========================================================================
    - pillow>=10.1.0,<11.0                  # å›¾åƒå¤„ç†å’Œæ ¼å¼è½¬æ¢
    - python-magic>=0.4.27,<1.0             # æ–‡ä»¶ç±»åž‹æ™ºèƒ½æ£€æµ‹
    - pdfplumber>=0.10.0,<1.0               # PDF æ–‡æœ¬å’Œè¡¨æ ¼æå–
    - pytesseract>=0.3.10,<1.0              # OCR æ–‡å­—è¯†åˆ«
    - opencv-python>=4.8.0,<5.0             # è®¡ç®—æœºè§†è§‰å›¾åƒå¤„ç†

    # =========================================================================
    # ðŸ“± ç¤¾äº¤åª’ä½“å’Œ API é›†æˆ
    # =========================================================================
    - tweepy>=4.14.0,<5.0                   # Twitter API v2 å®¢æˆ·ç«¯
    - praw>=7.7.0,<8.0                      # Reddit API å®˜æ–¹å®¢æˆ·ç«¯
    - facebook-sdk>=3.1.0,<4.0              # Facebook Graph API
    - instaloader>=4.10.0,<5.0              # Instagram æ•°æ®ä¸‹è½½
    - youtube-dl>=2021.12.17                # YouTube è§†é¢‘ä¸‹è½½
    - yt-dlp>=2023.12.30                    # YouTube-dl å¢žå¼ºç‰ˆæœ¬

    # =========================================================================
    # ðŸ” æœç´¢å¼•æ“Žå’Œ SEO å·¥å…·
    # =========================================================================
    - googlesearch-python>=1.2.3,<2.0       # Google æœç´¢ç»“æžœæŠ“å–
    - duckduckgo-search>=3.9.0,<4.0         # DuckDuckGo æœç´¢ API
    - advertools>=0.14.0,<1.0               # SEO å’Œ SEM åˆ†æžå·¥å…·
    - requests-html>=0.10.0,<1.0            # JavaScript æ”¯æŒçš„ HTTP åº“

    # =========================================================================
    # ðŸ“Š æ•°æ®éªŒè¯å’Œæ¸…æ´—
    # =========================================================================
    - validators>=0.22.0,<1.0               # æ•°æ®æ ¼å¼éªŒè¯å·¥å…·
    - python-dateutil>=2.8.0,<3.0          # æ—¥æœŸæ—¶é—´è§£æžå’Œå¤„ç†
    - phonenumbers>=8.13.0,<9.0             # ç”µè¯å·ç è§£æžå’ŒéªŒè¯
    - email-validator>=2.1.0,<3.0           # é‚®ç®±åœ°å€éªŒè¯
    - price-parser>=0.3.4,<1.0              # ä»·æ ¼ä¿¡æ¯è§£æž

    # =========================================================================
    # ðŸŒ ç½‘ç»œåè®®å’Œé€šä¿¡
    # =========================================================================
    - websockets>=12.0,<13.0                # WebSocket åè®®æ”¯æŒ
    - websocket-client>=1.7.0,<2.0          # WebSocket å®¢æˆ·ç«¯
    - ftplib>=3.11,<4.0                     # FTP åè®®å®¢æˆ·ç«¯
    - imaplib>=3.11,<4.0                    # IMAP é‚®ä»¶åè®®
    - paramiko>=3.4.0,<4.0                  # SSH å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨

    # =========================================================================
    # ðŸ“ˆ ç›‘æŽ§å’Œæ€§èƒ½åˆ†æž
    # =========================================================================
    - requests-cache>=1.1.0,<2.0            # HTTP è¯·æ±‚ç¼“å­˜
    - cachetools>=5.3.0,<6.0                # é«˜çº§ç¼“å­˜å·¥å…·
    - memory-profiler>=0.61.0,<1.0          # å†…å­˜ä½¿ç”¨åˆ†æž
    - line-profiler>=4.1.0,<5.0             # é€è¡Œæ€§èƒ½åˆ†æž
    - py-spy>=0.3.14,<1.0                   # è¿è¡Œæ—¶æ€§èƒ½ç›‘æŽ§

    # =========================================================================
    # ðŸ”§ å®žç”¨å·¥å…·å’Œåº“
    # =========================================================================
    - rich>=13.7.0,<14.0                    # å¯Œæ–‡æœ¬ç»ˆç«¯è¾“å‡º
    - typer>=0.9.0,<1.0                     # çŽ°ä»£ CLI æ¡†æž¶
    - loguru>=0.7.0,<1.0                    # å¼ºå¤§çš„æ—¥å¿—è®°å½•åº“
    - tenacity>=8.2.0,<9.0                  # é‡è¯•å’Œå®¹é”™æœºåˆ¶
    - schedule>=1.2.0,<2.0                  # ä»»åŠ¡è°ƒåº¦å’Œå®šæ—¶æ‰§è¡Œ
    - python-slugify>=8.0.0,<9.0            # URL å‹å¥½å­—ç¬¦ä¸²è½¬æ¢

    # =========================================================================
    # ðŸ›¡ï¸ å®‰å…¨å’Œåˆè§„å·¥å…·
    # =========================================================================
    - cryptography>=41.0.0,<42.0            # åŠ å¯†å’Œå®‰å…¨é€šä¿¡
    - requests-toolbelt>=1.0.0,<2.0         # HTTP å·¥å…·æ‰©å±•
    - urllib3>=2.0.0,<3.0                   # HTTP å®¢æˆ·ç«¯åŸºç¡€åº“
    - certifi>=2023.11.17                   # CA è¯ä¹¦æŸ
    - chardet>=5.2.0,<6.0                   # å­—ç¬¦ç¼–ç æ£€æµ‹

# çŽ¯å¢ƒå˜é‡é…ç½®
variables:
  # æµè§ˆå™¨å’Œçˆ¬è™«é…ç½®
  PLAYWRIGHT_BROWSERS_PATH: ~/.cache/playwright
  SCRAPY_SETTINGS_MODULE: settings.production
  
  # ç”¨æˆ·ä»£ç†å’Œèº«ä»½ä¼ªè£…
  USER_AGENT: "Mozilla/5.0 (compatible; Enterprise-Bot/1.0; +http://www.example.com/bot)"
  DEFAULT_REQUEST_HEADERS: '{"Accept-Language": "en-US,en;q=0.9"}'
  
  # æ€§èƒ½å’Œå¹¶å‘é…ç½®
  CONCURRENT_REQUESTS: "16"
  CONCURRENT_REQUESTS_PER_DOMAIN: "8"
  DOWNLOAD_DELAY: "1"
  RANDOMIZE_DOWNLOAD_DELAY: "0.5"
  
  # ç½‘ç»œå’Œé‡è¯•é…ç½®
  RETRY_TIMES: "3"
  RETRY_HTTP_CODES: "500,502,503,504,408,429"
  DOWNLOAD_TIMEOUT: "180"
  
  # æ•°æ®å­˜å‚¨é…ç½®
  REDIS_URL: "redis://localhost:6379/0"
  MONGODB_URI: "mongodb://localhost:27017/"
  ELASTICSEARCH_HOST: "localhost:9200"
  
  # åæ£€æµ‹é…ç½®
  ROTATING_PROXY_LIST_PATH: "./proxies.txt"
  CAPTCHA_SERVICE_API_KEY: ""
  CLOUDFLARE_BYPASS_ENABLED: "true"
  
  # æ—¥å¿—å’Œç›‘æŽ§
  LOG_LEVEL: "INFO"
  STATS_CLASS: "scrapy.statscollectors.MemoryStatsCollector"
  TELNETCONSOLE_ENABLED: "false"

# ==============================================================================
# çŽ¯å¢ƒè¯´æ˜Ž
# ==============================================================================
# 
# ðŸŽ¯ ä¸»è¦ç”¨é€”ï¼š
# â€¢ å¤§è§„æ¨¡ Web æ•°æ®é‡‡é›†å’ŒæŠ“å–
# â€¢ ç”µå•†ä»·æ ¼ç›‘æŽ§å’Œç«žå“åˆ†æž
# â€¢ ç¤¾äº¤åª’ä½“å†…å®¹èšåˆå’Œåˆ†æž
# â€¢ æ–°é—»èµ„è®¯è‡ªåŠ¨åŒ–æ”¶é›†
# â€¢ API æ•°æ®é›†æˆå’ŒåŒæ­¥
# â€¢ ç½‘ç«™ç»“æž„åŒ–æ•°æ®æå–
# 
# ðŸ“‹ æ ¸å¿ƒåŠŸèƒ½ï¼š
# â€¢ Playwright/Selenium æµè§ˆå™¨è‡ªåŠ¨åŒ–
# â€¢ Scrapy åˆ†å¸ƒå¼çˆ¬è™«æ¡†æž¶
# â€¢ å¼‚æ­¥é«˜å¹¶å‘æ•°æ®é‡‡é›†
# â€¢ åæ£€æµ‹å’Œåçˆ¬è™«ç»•è¿‡
# â€¢ å¤šæ ¼å¼æ•°æ®è§£æžå’Œæ¸…æ´—
# â€¢ åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å¤„ç†
# 
# ðŸ› ï¸ æ”¯æŒçš„æ•°æ®æºï¼š
# â€¢ HTML/XML ç½‘é¡µå†…å®¹
# â€¢ JSON/REST API æŽ¥å£
# â€¢ RSS/Atom è®¢é˜…æº
# â€¢ ç¤¾äº¤åª’ä½“å¹³å° (Twitter, Reddit, Facebook)
# â€¢ ç”µå•†å¹³å°äº§å“ä¿¡æ¯
# â€¢ æ–°é—»åª’ä½“æ–‡ç« å†…å®¹
# â€¢ PDF æ–‡æ¡£å’Œå›¾åƒæ–‡æœ¬ (OCR)
# 
# âš¡ æ€§èƒ½ç‰¹æ€§ï¼š
# â€¢ å¼‚æ­¥ I/O å¹¶å‘å¤„ç† (50-100å€æ€§èƒ½æå‡)
# â€¢ æ™ºèƒ½ä»£ç†è½®æ¢å’Œè´Ÿè½½å‡è¡¡
# â€¢ åˆ†å¸ƒå¼ä»»åŠ¡é˜Ÿåˆ—å’Œé›†ç¾¤éƒ¨ç½²
# â€¢ å¢žé‡æŠ“å–å’Œæ•°æ®åŽ»é‡
# â€¢ è‡ªé€‚åº”å»¶è¿Ÿå’Œé€ŸçŽ‡é™åˆ¶
# 
# ðŸ›¡ï¸ åæ£€æµ‹èƒ½åŠ›ï¼š
# â€¢ ç”¨æˆ·ä»£ç†è½®æ¢å’ŒæŒ‡çº¹ä¼ªé€ 
# â€¢ TLS æŒ‡çº¹åŒ¹é…å’Œè§„é¿
# â€¢ éªŒè¯ç è‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†
# â€¢ IP ä»£ç†æ± ç®¡ç†
# â€¢ è¡Œä¸ºæ¨¡å¼æ™ºèƒ½æ¨¡æ‹Ÿ
# 
# ðŸ—„ï¸ æ•°æ®å­˜å‚¨æ”¯æŒï¼š
# â€¢ å…³ç³»æ•°æ®åº“ (PostgreSQL, MySQL)
# â€¢ æ–‡æ¡£æ•°æ®åº“ (MongoDB)
# â€¢ æœç´¢å¼•æ“Ž (Elasticsearch)
# â€¢ ç¼“å­˜æ•°æ®åº“ (Redis)
# â€¢ æ–‡ä»¶æ ¼å¼ (JSON, CSV, Excel, Parquet)
# 
# ðŸ” ä¼ä¸šåˆè§„ï¼š
# â€¢ robots.txt éµå¾ªå’Œè§£æž
# â€¢ é€ŸçŽ‡é™åˆ¶å’Œç¤¼è²Œæ€§å»¶è¿Ÿ
# â€¢ æ•°æ®éšç§ä¿æŠ¤å’Œè„±æ•
# â€¢ è®¿é—®æ—¥å¿—è®°å½•å’Œå®¡è®¡
# â€¢ æ³•å¾‹åˆè§„æ£€æŸ¥å·¥å…·
