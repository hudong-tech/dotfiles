# ==============================================================================
# 科学研究通用环境模板
# 适用于：跨学科科学研究、学术论文、数据分析、科学计算、研究复现
# Python 版本：参数化支持 3.9-3.12
# ==============================================================================

# 💻 系统配置要求
# 最低配置：16GB RAM, 10GB 可用磁盘空间
# 推荐配置：32GB RAM, 20GB 可用磁盘空间
# 高性能配置：64GB+ RAM, 50GB+ 可用磁盘空间 (大规模科学计算)
# 包大小估算：~3.8GB (完整的科学研究工具链)
# 支持系统：Windows 11+, macOS 12+, Linux (Ubuntu 20.04+)
# 安装时间：25-40分钟 (取决于网络速度)
# CPU建议：多核处理器 (科学计算并行化)
# 特殊说明：包含多学科科学计算工具，支持论文发布和研究复现

name: research{{ '-' + suffix if suffix else '' }}

channels:
  - conda-forge
  - defaults

dependencies:
  # -----------------------------------------------------------------------------
  # 核心 Python 环境
  # -----------------------------------------------------------------------------
  - python={{ python_version }}.*           # Python 解释器
  - pip                                      # Python 包管理器

  # -----------------------------------------------------------------------------
  # 科学计算核心基础
  # -----------------------------------------------------------------------------
  - numpy>=1.21,<2.0                        # 数值计算基础
  - scipy>=1.9,<2.0                         # 科学计算和统计
  - pandas>=1.5,<3.0                        # 数据分析和处理
  - sympy>=1.11,<2.0                        # 符号数学计算
  - numba>=0.56,<1.0                        # 高性能数值计算编译器

  # -----------------------------------------------------------------------------
  # 统计分析和建模
  # -----------------------------------------------------------------------------
  - statsmodels>=0.13,<1.0                  # 统计建模
  - scikit-learn>=1.1,<2.0                  # 机器学习算法库
  - seaborn>=0.11,<1.0                      # 统计数据可视化

  # -----------------------------------------------------------------------------
  # 数据可视化
  # -----------------------------------------------------------------------------
  - matplotlib>=3.5,<4.0                    # 基础绘图库
  - plotly>=5.10,<6.0                       # 交互式可视化
  - bokeh>=2.4,<4.0                         # 交互式Web可视化
  - altair>=4.2,<6.0                        # 声明式统计可视化

  # -----------------------------------------------------------------------------
  # 交互式研究环境
  # -----------------------------------------------------------------------------
  - jupyter>=1.0,<2.0                       # Jupyter 生态系统
  - jupyterlab>=4.0,<5.0                    # 现代研究开发环境
  - ipywidgets>=8.0,<9.0                    # 交互式组件
  - notebook>=6.4,<8.0                      # Jupyter Notebook

  # -----------------------------------------------------------------------------
  # 数据处理和存储
  # -----------------------------------------------------------------------------
  - h5py>=3.7,<4.0                          # HDF5 科学数据格式
  - netcdf4>=1.6,<2.0                       # NetCDF 科学数据格式
  - openpyxl>=3.0,<4.0                      # Excel 文件处理
  - pytables>=3.7,<4.0                      # HDF5 表格数据

  # -----------------------------------------------------------------------------
  # 图像和信号处理
  # -----------------------------------------------------------------------------
  - pillow>=9.0,<11.0                       # 图像处理
  - opencv>=4.6,<5.0                        # 计算机视觉
  - imageio>=2.20,<3.0                      # 图像输入输出
  - scikit-image>=0.19,<1.0                 # 图像处理算法

  # -----------------------------------------------------------------------------
  # 网络和数据获取
  # -----------------------------------------------------------------------------
  - requests>=2.28,<3.0                     # HTTP 请求
  - beautifulsoup4>=4.11,<5.0               # 网页数据解析
  - lxml>=4.9,<5.0                          # XML 解析

  # -----------------------------------------------------------------------------
  # 开发和测试工具
  # -----------------------------------------------------------------------------
  - pytest>=7.2,<9.0                        # 测试框架
  - black>=23.0,<25.0                       # 代码格式化
  - ipython>=8.10,<9.0                      # 增强交互式Shell

  # -----------------------------------------------------------------------------
  # 配置和工具
  # -----------------------------------------------------------------------------
  - pyyaml>=6.0,<7.0                        # YAML 配置文件
  - tqdm>=4.64,<5.0                         # 进度条
  - psutil>=5.9,<6.0                        # 系统监控

  # -----------------------------------------------------------------------------
  # pip 依赖 (科学研究专用工具)
  # -----------------------------------------------------------------------------
  - pip:
    # =========================================================================
    # 🔬 学科专用科学计算库
    # =========================================================================
    - astropy>=5.2,<6.0                     # 天体物理学
    - biopython>=1.81,<2.0                  # 生物信息学
    - rdkit>=2023.3.0,<2024.0               # 化学信息学和药物化学
    - networkx>=2.8,<4.0                    # 复杂网络分析
    - igraph>=0.10.0,<1.0                   # 图论和网络分析

    # =========================================================================
    # 📊 高级统计分析
    # =========================================================================
    - pingouin>=0.5.0,<1.0                  # 统计分析包
    - lifelines>=0.27.0,<1.0                # 生存分析
    - pymc>=5.0.0,<6.0                      # 贝叶斯统计建模
    - arviz>=0.15.0,<1.0                    # 贝叶斯模型诊断

    # =========================================================================
    # 🧮 数值计算和优化
    # =========================================================================
    - cvxpy>=1.3.0,<2.0                     # 凸优化
    - scikit-optimize>=0.9.0,<1.0           # 优化算法
    - pulp>=2.7.0,<3.0                      # 线性规划
    - pyomo>=6.5.0,<7.0                     # 优化建模

    # =========================================================================
    # 📝 学术写作和发布
    # =========================================================================
    - jupyterlab-latex>=3.1.0,<4.0          # Jupyter 中的 LaTeX 支持
    - nbconvert>=7.2.0,<8.0                 # Notebook 格式转换
    - papermill>=2.4.0,<3.0                 # Notebook 参数化执行
    - jupyter-book>=0.15.0,<1.0             # 学术书籍和文档

    # =========================================================================
    # 🎨 高级可视化和制图
    # =========================================================================
    - holoviews>=1.16.0,<2.0                # 高维数据可视化
    - datashader>=0.15.0,<1.0               # 大数据可视化
    - cartopy>=0.21.0,<1.0                  # 地理空间数据可视化
    - geopandas>=0.13.0,<1.0                # 地理数据分析
    - folium>=0.14.0,<1.0                   # 交互式地图

    # =========================================================================
    # 🗄️ 数据库和大数据
    # =========================================================================
    - sqlalchemy>=2.0,<3.0                  # 数据库 ORM
    - dask[complete]>=2023.5.0,<2025.0      # 并行计算框架
    - vaex>=4.16.0,<5.0                     # 大数据探索
    - polars>=0.18.0,<1.0                   # 高性能数据帧

    # =========================================================================
    # 🔄 实验管理和复现
    # =========================================================================
    - mlflow>=2.6,<3.0                      # 实验跟踪
    - dvc>=3.2.0,<4.0                       # 数据版本控制
    - sacred>=0.8.4,<1.0                    # 实验配置管理
    - hydra-core>=1.3,<2.0                  # 配置管理框架

    # =========================================================================
    # 🧪 专业数据分析工具
    # =========================================================================
    - pandas-profiling>=3.6,<4.0            # 自动化数据探索
    - sweetviz>=2.1,<3.0                    # 数据分析可视化
    - great-expectations>=0.17.0,<1.0       # 数据质量验证
    - evidently>=0.4.0,<1.0                 # 数据和模型监控

    # =========================================================================
    # 🔧 实用工具和增强
    # =========================================================================
    - rich>=13.0,<14.0                      # 富文本终端输出
    - typer>=0.9.0,<1.0                     # 现代 CLI 框架
    - python-dotenv>=1.0,<2.0               # 环境变量管理
    - fire>=0.5,<1.0                        # 快速 CLI 生成
    - loguru>=0.7.0,<1.0                    # 强大的日志系统

    # =========================================================================
    # 📡 数据获取和API集成
    # =========================================================================
    - yfinance>=0.2.0,<1.0                  # 金融数据获取
    - quandl>=3.7.0,<4.0                    # 经济金融数据
    - alpha-vantage>=2.3.0,<3.0             # 金融市场数据API
    - tweepy>=4.14.0,<5.0                   # Twitter 数据API

    # =========================================================================
    # 🎛️ 时间序列分析
    # =========================================================================
    - prophet>=1.1.0,<2.0                   # 时间序列预测
    - pmdarima>=2.0.0,<3.0                  # ARIMA 模型自动化
    - tslearn>=0.6.0,<1.0                   # 时间序列机器学习
    - sktime>=0.21.0,<1.0                   # 时间序列分析框架

# 环境变量配置
variables:
  # Jupyter 配置
  JUPYTER_CONFIG_DIR: ~/.jupyter
  JUPYTER_DATA_DIR: ~/.local/share/jupyter
  
  # 并行计算配置
  NUMBA_NUM_THREADS: "4"
  MKL_NUM_THREADS: "4"
  OMP_NUM_THREADS: "4"
  
  # 科学计算缓存
  NUMBA_CACHE_DIR: ~/.numba_cache
  MPLCONFIGDIR: ~/.config/matplotlib
  
  # 研究环境配置
  PYTHONHASHSEED: "0"  # 确保结果可重现
  RESEARCH_DATA_DIR: "./data"
  RESEARCH_OUTPUT_DIR: "./output"
  
  # 内存和性能优化
  PYTHONUNBUFFERED: "1"
  DASK_CACHE_DIR: ~/.dask_cache

# ==============================================================================
# 环境说明
# ==============================================================================
# 
# 🎯 主要用途：
# • 跨学科科学研究项目
# • 学术论文数据分析和可视化
# • 实验数据处理和统计分析
# • 科学计算和数值模拟
# • 研究结果复现和验证
# • 学术数据发布和共享
# 
# 📋 核心功能：
# • 完整的科学计算工具链 (NumPy, SciPy, SymPy)
# • 多学科专用库 (天体物理学、生物信息学、化学信息学)
# • 高级统计分析 (贝叶斯统计、生存分析、时间序列)
# • 专业可视化工具 (学术级图表、地理空间可视化)
# • 实验管理和研究复现工具
# • 大数据处理和并行计算支持
# 
# 🛠️ 支持的研究流程：
# • 文献调研和数据收集
# • 探索性数据分析
# • 假设检验和统计推断
# • 数值模拟和建模
# • 结果可视化和解释
# • 论文写作和发布
# 
# ⚡ 学科支持范围：
# • 物理学和天体物理学
# • 生物学和生物信息学
# • 化学和材料科学
# • 经济学和金融学
# • 社会科学和心理学
# • 地理学和环境科学
# 
# 🔐 研究标准：
# • 结果可重现性保证
# • 数据质量验证
# • 实验配置管理
# • 版本控制集成
# • 学术诚信工具
